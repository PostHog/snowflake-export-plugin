{
    "name": "Snowflake Export Plugin",
    "url": "https://github.com/posthog/snowflake-export-plugin",
    "description": "Export PostHog events into Snowflake",
    "main": "index.ts",
    "posthogVersion": ">=1.25.0",
    "config": [
        {
            "key": "account",
            "name": "Account",
            "type": "string",
            "hint": "In the format of \"ab12345\" or \"ab12345.region.cloud\"",
            "required": true
        },
        {
            "key": "username",
            "name": "Snowflake Username",
            "type": "string",
            "required": true
        },
        {
            "key": "password",
            "name": "Snowflake Password",
            "type": "string",
            "required": false,
            "secret": true
        },
        {
            "key": "database",
            "name": "Snowflake database name",
            "type": "string",
            "required": true
        },
        {
            "key": "dbschema",
            "name": "Snowflake database schema",
            "type": "string",
            "default": "PUBLIC",
            "required": true
        },
        {
            "key": "table",
            "name": "Snowflake table name",
            "type": "string",
            "required": true,
            "hint": "Will be created if doesn't already exist."
        },
        {
            "key": "warehouse",
            "name": "Virtual Warehouse to use for copying files",
            "required": true,
            "type": "string"
        },
        {
            "key": "role",
            "name": "Specify a role to access Snowflake with",
            "type": "string",
            "hint": "Optional, overrides the default role for the user."
        },
        {
            "key": "stageToUse",
            "name": "Stage Type",
            "type": "choice",
            "required": true,
            "choices": ["S3", "GCS"]
        },
        {
            "key": "stage",
            "name": "Name to use for external stage",
            "type": "string",
            "required": true,
            "hint": "Will be created if doesn't already exist."
        },
        {
            "key": "bucketName",
            "name": "Bucket Name",
            "type": "string",
            "required": true
        },
        {
            "key": "purgeFromStage",
            "name": "Purge events from stage after copying?",
            "type": "choice",
            "choices": ["No", "Yes"],          
            "default": "No"
        },
        {
            "key": "awsAccessKeyId",
            "name": "AWS Access Key ID",
            "type": "string",
            "visible_if": [["stageToUse", "S3"]],
            "required_if": [["stageToUse", "S3"]]
        },
        {
            "key": "awsSecretAccessKey",
            "name": "AWS Secret Access Key",
            "type": "string",
            "secret": true,
            "visible_if": [["stageToUse", "S3"]],
            "required_if": [["stageToUse", "S3"]]
        },
        {
            "key": "awsRegion",
            "name": "S3 Bucket Region",
            "type": "string",
            "hint": "We recommend using the same region as your Snowflake instance.",
            "visible_if": [["stageToUse", "S3"]],
            "required_if": [["stageToUse", "S3"]]
        },
        {
            "key": "storageIntegrationName",
            "name": "GCS Storage Integration name",
            "type": "string",
            "hint": "Follow [these instructions](https://docs.snowflake.com/en/user-guide/data-load-gcs-config.html) to get this.",
            "visible_if": [["stageToUse", "GCS"]],
            "required_if": [["stageToUse", "GCS"]]
        },
        {
            "key": "gcsCredentials",
            "name": "GCS Credentials",
            "type": "attachment",
            "hint": "This should be a JSON file. Instructions on how to get this file can be found in [this Google Cloud Tutorial](https://cloud.google.com/bigquery/docs/reference/libraries#setting_up_authentication).",
            "visible_if": [["stageToUse", "GCS"]],
            "required_if": [["stageToUse", "GCS"]]
        },
        {
            "key": "eventsToIgnore",
            "name": "Events to ignore",
            "type": "string",
            "default": "$snapshot, $feature_flag_called",
            "hint": "Comma separated list of events to ignore"
        }
    ]
}